#include<stdio.h>
#include<stdlib.h>
#include<string.h>
//0xgame{51-ssssassddddddddddddwwwdddwwwwwaaawaaasaaaaaa}
unsigned char maze[] = { 0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2e,0x2e,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2a,0x2a,0x73,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2a,0x2a,0x2e,0x2e,0x2e,0x2e,0x2a,0x2a,0x2a,0x2a,
 
                         0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a ,0x2a,

                         0x2a,0x64,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,

                         0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2e,0x2e,0x2e,0x2a,0x2a,0x2a,0x2a,  

                         0x2e,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a, 

                         0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,

                         0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2e,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,0x2a,
};
int check_flag(unsigned char* road, int x, int y)
{
	int i;
    if (maze[20 * x + y] != 'd')
    {
        return 0;
    }
    int h = x;
        int l = y;
    int length = strlen(road);
    for ( i = 0; ; i++)
    {
        if (i >= length)
        {
            break;
        }
        switch (road[i])
        {
            case 's':
                h++;
                break;
            case 'w':
                h--;
                break;
            case 'd':
                l++;
                break;
            case 'a':
                l--;
                break;
            default:
                return 0;

        }
        if (h < 0 || h>11 || l < 0 || l>19)
        {
            puts("out of length\n");
            return 0;
        }
        if (length - 1 == i)
            return maze[20 * h + l] == 's';
        if (maze[20 * h + l] != '.')
            return 0;

    }
    return 0;

}
int main()
{
    unsigned char route[0x100] = {0,0,0,0};
    int x, y;
	puts("welcome to 0xGame\n");
    puts("please tell me x,y:");
    scanf("%d %d", &x, &y);
    if (maze[ 20*x + y] != 'd')
    {
        printf("something wromg,how about try again¦²( ¡ã ¡÷ ¡ã|||)¦õ \n");
        //system("pause");
        exit(0);
    }
// puts("right");
    puts("now please input your route:");
    scanf("%s",route);
    // printf("%s",route);
    int result = check_flag(route, x, y);
    if (result == 1)
    {
        printf("right! <(£þ¦á£þ)>\n");
        printf("your flag: 0xgame{%d%d-%s}\n",x,y,route);
        //ystem("pause");
    }
    else {
        puts("try again (¥Î¤Ø£þ¡¢)\n");
        //system("pause");
    }
}
